import{d as e,a as t,m as a,b as l,c as o,e as i,f as s,t as n,g as c,r,h,o as u,i as d,w as p,j as b,n as m,k as f,l as C,p as k,q as g,s as v,u as x,v as S,x as D,y,z as _,A as z,B as w,C as B}from"./index-BZZEtzn7.js";import{_ as I,a as G,b as V,c as A}from"./u-button.CAXpmgrA.js";import{_ as P,a as L,b as H}from"./u-form.FxwdRL8U.js";import{p as N,g as T,c as $,l as U,_ as F}from"./TCaptcha.Bev9IoG7.js";const R=I({name:"u-checkbox",mixins:[a,l,e({props:{name:{type:[String,Number,Boolean],default:()=>t.checkbox.name},shape:{type:String,default:()=>t.checkbox.shape},size:{type:[String,Number],default:()=>t.checkbox.size},checked:{type:Boolean,default:()=>t.checkbox.checked},disabled:{type:[String,Boolean],default:()=>t.checkbox.disabled},activeColor:{type:String,default:()=>t.checkbox.activeColor},inactiveColor:{type:String,default:()=>t.checkbox.inactiveColor},iconSize:{type:[String,Number],default:()=>t.checkbox.iconSize},iconColor:{type:String,default:()=>t.checkbox.iconColor},label:{type:[String,Number],default:()=>t.checkbox.label},labelSize:{type:[String,Number],default:()=>t.checkbox.labelSize},labelColor:{type:String,default:()=>t.checkbox.labelColor},labelDisabled:{type:[String,Boolean],default:()=>t.checkbox.labelDisabled},usedAlone:{type:[Boolean],default:()=>!1}}})],data:()=>({isChecked:!1,parentData:{iconSize:12,labelDisabled:null,disabled:null,shape:"square",activeColor:null,inactiveColor:null,size:18,modelValue:null,iconColor:null,placement:"row",borderBottom:!1,iconPlacement:"left"}}),computed:{elDisabled(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize(){return this.size?this.size:this.parentData.size?this.parentData.size:21},elIconSize(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:12},elActiveColor(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"#2979ff"},elInactiveColor(){return this.inactiveColor?this.inactiveColor:this.parentData.inactiveColor?this.parentData.inactiveColor:"#c8c9cc"},elLabelColor(){return this.labelColor?this.labelColor:this.parentData.labelColor?this.parentData.labelColor:"#606266"},elShape(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},elLabelSize(){return o(this.labelSize?this.labelSize:this.parentData.labelSize?this.parentData.labelSize:"15")},elIconColor(){const e=this.iconColor?this.iconColor:this.parentData.iconColor?this.parentData.iconColor:"#ffffff";return this.elDisabled?this.isChecked?this.elInactiveColor:"transparent":this.isChecked?e:"transparent"},iconClasses(){let e=[];return e.push("u-checkbox__icon-wrap--"+this.elShape),this.elDisabled&&e.push("u-checkbox__icon-wrap--disabled"),this.isChecked&&this.elDisabled&&e.push("u-checkbox__icon-wrap--disabled--checked"),e},iconWrapStyle(){const e={};return e.backgroundColor=this.isChecked&&!this.elDisabled?this.elActiveColor:"#ffffff",e.borderColor=this.isChecked&&!this.elDisabled?this.elActiveColor:this.elInactiveColor,e.width=o(this.elSize),e.height=o(this.elSize),this.usedAlone||"right"===this.parentData.iconPlacement&&(e.marginRight=0),e},checkboxStyle(){const e={};return this.usedAlone||(this.parentData.borderBottom&&this.parentData.placement,this.parentData.borderBottom&&"column"===this.parentData.placement&&(e.paddingBottom="8px")),i(e,s(this.customStyle))}},mounted(){this.init()},emits:["change"],methods:{init(){this.usedAlone||(this.updateParentData(),this.parent);const e=this.parentData.modelValue;this.checked?this.isChecked=!0:!this.usedAlone&&n.array(e)&&(this.isChecked=e.some((e=>e===this.name)))},updateParentData(){this.getParentData("u-checkbox-group")},wrapperClickHandler(e){(this.usedAlone||"right"===this.parentData.iconPlacement)&&this.iconClickHandler(e)},iconClickHandler(e){this.preventEvent(e),this.elDisabled||this.setRadioCheckedStatus()},labelClickHandler(e){this.preventEvent(e),this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},emitEvent(){this.$emit("change",this.isChecked),this.$nextTick((()=>{c(this,"change")}))},setRadioCheckedStatus(){this.isChecked=!this.isChecked,this.emitEvent(),this.usedAlone||"function"==typeof this.parent.unCheckedOther&&this.parent.unCheckedOther(this)}},watch:{checked(){this.isChecked=this.checked}}},[["render",function(e,t,a,l,o,i){const s=r(h("u-icon"),G),n=x,c=S;return u(),d(n,{class:m(["u-checkbox cursor-pointer",[`u-checkbox-label--${o.parentData.iconPlacement}`,o.parentData.borderBottom&&"column"===o.parentData.placement&&"u-border-bottom"]]),style:C([i.checkboxStyle]),onClick:f(i.wrapperClickHandler,["stop"])},{default:p((()=>[b(n,{class:m(["u-checkbox__icon-wrap cursor-pointer",i.iconClasses]),onClick:f(i.iconClickHandler,["stop"]),style:C([i.iconWrapStyle])},{default:p((()=>[k(e.$slots,"icon",{},(()=>[b(s,{class:"u-checkbox__icon-wrap__icon",name:"checkbox-mark",size:i.elIconSize,color:i.elIconColor},null,8,["size","color"])]),!0)])),_:3},8,["onClick","class","style"]),k(e.$slots,"label",{label:e.label,elDisabled:i.elDisabled},(()=>[b(c,{onClick:f(i.labelClickHandler,["stop"]),style:C({color:i.elDisabled?i.elInactiveColor:i.elLabelColor,fontSize:i.elLabelSize,lineHeight:i.elLabelSize})},{default:p((()=>[g(v(e.label),1)])),_:1},8,["onClick","style"])]),!0)])),_:3},8,["style","onClick","class"])}],["__scopeId","data-v-c40cf5c3"]]);const Z=I({name:"u-checkbox-group",mixins:[a,l,e({props:{name:{type:String,default:()=>t.checkboxGroup.name},modelValue:{type:Array,default:()=>t.checkboxGroup.value},shape:{type:String,default:()=>t.checkboxGroup.shape},disabled:{type:Boolean,default:()=>t.checkboxGroup.disabled},activeColor:{type:String,default:()=>t.checkboxGroup.activeColor},inactiveColor:{type:String,default:()=>t.checkboxGroup.inactiveColor},size:{type:[String,Number],default:()=>t.checkboxGroup.size},placement:{type:String,default:()=>t.checkboxGroup.placement},labelSize:{type:[String,Number],default:()=>t.checkboxGroup.labelSize},labelColor:{type:[String],default:()=>t.checkboxGroup.labelColor},labelDisabled:{type:Boolean,default:()=>t.checkboxGroup.labelDisabled},iconColor:{type:String,default:()=>t.checkboxGroup.iconColor},iconSize:{type:[String,Number],default:()=>t.checkboxGroup.iconSize},iconPlacement:{type:String,default:()=>t.checkboxGroup.iconPlacement},borderBottom:{type:Boolean,default:()=>t.checkboxGroup.borderBottom}}})],computed:{parentData(){return[this.modelValue,this.disabled,this.inactiveColor,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.borderBottom,this.placement]},bemClass(){return this.bem("checkbox-group",["placement"])}},watch:{parentData:{handler(){this.children.length&&this.children.map((e=>{"function"==typeof e.init&&e.init()}))},deep:!0}},data:()=>({}),created(){this.children=[]},emits:["update:modelValue","change"],methods:{unCheckedOther(e){const t=[];this.children.map((e=>{e.isChecked&&t.push(e.name)})),this.$emit("change",t),this.$emit("update:modelValue",t)}}},[["render",function(e,t,a,l,o,i){const s=x;return u(),d(s,{class:m(["u-checkbox-group",i.bemClass])},{default:p((()=>[k(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}],["__scopeId","data-v-f14a800c"]]),j=D("userInfo",(()=>{const e=y({});return{userInfo:e,getUserInfo:()=>{console.log(e.value)},updateUserInfo:t=>{e.value=t},resetUserInfo:()=>{e.value={}}}})),q=I(_({__name:"login",setup(e){const t=y(""),a=y(),l=y(),o=y([]),{updateUserInfo:i}=j(),s=y({username:"",password:"",accountType:"phone"}),n={username:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:(e,t,a)=>N.test(t),message:"手机号码不正确",trigger:["change","blur"]}],password:[{required:!0,message:"请输入验证码",trigger:["blur"]}]},c=e=>{t.value=e},m=async()=>""===s.value.username?z({icon:"none",title:"手机号不能为空"}):N.test(s.value.username)?a.value.canGetCode?(await T(s.value.username),void a.value.start()):z({icon:"none",title:"倒计时结束后再发送"}):z({icon:"none",title:"手机号码不正确"});function f(){l.value.validate().then((async e=>{if(e){if(0===o.value.length)return z({icon:"none",title:"勾选服务条款和隐私政策"});if(!(await $()))return z({icon:"none",title:"校验失败"});{const e=await U(s.value.username,s.value.password,s.value.accountType);i(e.data),w({url:"/pages/login/password"})}}})).catch((()=>z({icon:"none",title:"校验失败"})))}return(e,i)=>{const C=x,k=B,v=r(h("up-input"),V),S=r(h("up-form-item"),P),D=r(h("up-code"),F),y=r(h("up-text"),L),_=r(h("up-form"),H),z=r(h("up-button"),A),w=r(h("up-checkbox"),R),I=r(h("up-checkbox-group"),Z);return u(),d(C,{class:"login pd40"},{default:p((()=>[b(C,{class:"top"},{default:p((()=>[b(C,{class:"title"},{default:p((()=>[g("登录")])),_:1}),b(C,{class:"subTitle"},{default:p((()=>[g("LogIn To Your Account To Continue")])),_:1})])),_:1}),b(C,{class:"wechat"},{default:p((()=>[b(k,{mode:"aspectFill",src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='29.673'%20height='24'%20viewBox='0%200%2029.673%2024'%3e%3cdefs%3e%3cstyle%3e.a{fill:%2309bb07;}%3c/style%3e%3c/defs%3e%3cpath%20class='a'%20d='M48.529,135.262c.338,0,.675.031,1.011.061-.9-4.191-5.434-7.323-10.6-7.323-5.771.02-10.5,3.921-10.5,8.874,0,2.855,1.576,5.211,4.195,7.034l-1.057,3.128,3.676-1.822a18.2,18.2,0,0,0,3.674.515c.338,0,.658-.015.979-.044a7.952,7.952,0,0,1-.321-2.189c.015-4.541,3.95-8.232,8.941-8.232l0,0ZM42.88,132.44a1.306,1.306,0,1,1,0,2.613,1.329,1.329,0,1,1,0-2.613Zm-7.35,2.613a1.329,1.329,0,1,1,0-2.613,1.306,1.306,0,1,1,0,2.613Zm22.587,8.335c0-4.162-4.195-7.564-8.928-7.564-4.991,0-8.926,3.4-8.926,7.564s3.935,7.566,8.926,7.566a13.461,13.461,0,0,0,3.155-.517L55.222,152l-.8-2.6C56.54,147.809,58.117,145.726,58.117,143.387ZM46.3,142.081a1.132,1.132,0,0,1-1.057-1.049,1.148,1.148,0,0,1,1.057-1.049,1.076,1.076,0,1,1,0,2.1Zm5.773,0a1.117,1.117,0,0,1-1.042-1.049,1.13,1.13,0,0,1,1.042-1.049,1.076,1.076,0,1,1,0,2.1Z'%20transform='translate(-28.444%20-128)'/%3e%3c/svg%3e",alt:""}),b(C,{class:"title"},{default:p((()=>[g("微信登录")])),_:1})])),_:1}),b(C,{class:"lines"},{default:p((()=>[b(C,{class:"line"}),b(C,{class:"title"},{default:p((()=>[g("手机号码登录")])),_:1}),b(C,{class:"line"})])),_:1}),b(_,{model:s.value,rules:n,labelPosition:"top",labelWidth:"66",ref_key:"uFormRef",ref:l},{default:p((()=>[b(S,{prop:"username"},{default:p((()=>[b(v,{modelValue:s.value.username,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value.username=e),maxlength:11,placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),b(S,{prop:"password"},{default:p((()=>[b(v,{modelValue:s.value.password,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value.password=e),maxlength:6,placeholder:"请输入验证码"},{suffix:p((()=>[b(D,{seconds:60,ref_key:"uCodeRef",ref:a,onChange:c},null,512),b(y,{onClick:m,color:"#6861FF",text:t.value},null,8,["text"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),b(z,{onClick:f,throttleTime:1e3,color:"#6861FF"},{default:p((()=>[g("登录")])),_:1}),b(C,{class:"tip"},{default:p((()=>[g(" 未注册将自动创建账号 ")])),_:1}),b(I,{modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=e=>o.value=e)},{default:p((()=>[b(w,{shape:"circle",size:12,labelSize:12,labelColor:"rgba(0, 0, 0, 0.45)",label:"我已阅读并同意 《服务条款》《隐私政策》",name:!1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-158ee1d9"]]);export{q as default};
