import{z as e,y as a,r as o,h as t,o as l,i as n,w as s,j as u,q as r,A as d,B as i,u as c}from"./index-BZZEtzn7.js";import{b as p,c as m,_ as f}from"./u-button.CAXpmgrA.js";import{_ as h,a as v,b as _}from"./u-form.FxwdRL8U.js";import{p as g,a as b,c as x,o as k,_ as w}from"./TCaptcha.Bev9IoG7.js";const C=f(e({__name:"old",setup(e){const f=a({phone:"",code:""}),C=a(),V=a(""),j=a(),y={phone:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:(e,a,o)=>g.test(a),message:"手机号码不正确",trigger:["change","blur"]}],code:[{required:!0,message:"请输入验证码",trigger:["blur"]}]},F=e=>{V.value=e},T=async()=>""===f.value.phone?d({icon:"none",title:"手机号不能为空"}):g.test(f.value.phone)?j.value.canGetCode?(await b(),void j.value.start()):d({icon:"none",title:"倒计时结束后再发送"}):d({icon:"none",title:"手机号码不正确"});function q(){C.value.validate().then((async e=>{if(e){if(!(await x()))return d({icon:"none",title:"校验失败"});{const e=await k(f.value.code);i({url:"/pages/phone/new?comfirmToken="+e.data.confirmToken})}}})).catch((()=>d({icon:"none",title:"校验失败"})))}return(e,a)=>{const d=c,i=o(t("up-input"),p),g=o(t("up-form-item"),h),b=o(t("up-code"),w),x=o(t("up-text"),v),k=o(t("up-button"),m),R=o(t("up-form"),_);return l(),n(d,{class:"password pd40"},{default:s((()=>[u(d,{class:"top"},{default:s((()=>[u(d,{class:"title"},{default:s((()=>[r("验证原手机号")])),_:1})])),_:1}),u(R,{model:f.value,rules:y,labelPosition:"top",labelWidth:"66",ref_key:"uFormRef",ref:C},{default:s((()=>[u(g,{prop:"phone"},{default:s((()=>[u(i,{modelValue:f.value.phone,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value.phone=e),maxlength:11,placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),u(g,{prop:"code"},{default:s((()=>[u(i,{modelValue:f.value.code,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value.code=e),maxlength:6,placeholder:"请输入验证码"},{suffix:s((()=>[u(b,{seconds:60,ref_key:"uCodeRef",ref:j,onChange:F},null,512),u(x,{onClick:T,color:"#6861FF",text:V.value},null,8,["text"])])),_:1},8,["modelValue"])])),_:1}),u(k,{onClick:q,throttleTime:1e3,color:"#6861FF"},{default:s((()=>[r("提交")])),_:1})])),_:1},8,["model"])])),_:1})}}}),[["__scopeId","data-v-146c2ed6"]]);export{C as default};
